@using System.Web.Script.Serialization
@using ITS.Infrastructure.Global;
@model ITS.Domain.ViewModels.InternalTasksViewModel.TriageAssessmentQAViewModel
@{
    ViewBag.Title = "Triage AssessmentQA";
    Layout = "~/Views/Shared/_LayoutBootstrap.cshtml";
}
@section ContentHeader{
    <h1>
        Triage AssessmentQA</h1>
}
<div id="breadcrumb">
    <a href="@Url.Action(GlobalConst.Actions.InternalTasksController.Index, GlobalConst.Controllers.InternalTasks)" title="Go to Home">
        <i class="icon-home"></i>Internal Tasks</a> <a href="@Url.Action(@GlobalConst.Actions.TriageAssessmentController.Index, @GlobalConst.Controllers.TriageAssessment)" class="tip-bottom">
            Triage Assessment</a> <a href="#" class="tip-bottom">Patient Demographics</a>
</div>
<div class="container-fluid">
    <div class="row-fluid" id="divtriageAssessmentQA">
        @using (Html.BeginForm(GlobalConst.Actions.TriageAssessmentController.UpdateTriageAssessmentQA, GlobalConst.Controllers.TriageAssessment,
          FormMethod.Post, new
          {
              @class = "form-horizontal",
              id = "frmtriageAssessmentQA",
              enctype = "multipart/form-data",
              data_bind = "ajaxForm:{ success: function(responseText, statusText, xhr, $form){ UpdateTriageAssessmentQA(responseText, statusText, xhr, $form); },beforeSubmit: UpdateTriageAssesmentQAFormBeforeSubmit }"
          }))
        {
            <div class="widget-box">
                <div class="widget-title">
                    <span class="icon"><i class="icon-align-justify"></i></span>
                    <h5>
                        Patient Demographics</h5>
                </div>
                <div class="widget-content nopadding">
                    <div class="form-horizontal">
                        <div class="control-group">
                            <label class="control-label">
                                Patient First Name:</label>
                            <div class="controls">
                                <input type="text" readonly="readonly" name="CasePatientTreatment.FirstName" data-bind="value:FirstName" />
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label">
                                Patient Surname:
                            </label>
                            <div class="controls">
                                <input type="text" readonly="readonly" name="CasePatientTreatment.LastName" data-bind="value:LastName" />
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label">
                                Patient Address:
                            </label>
                            <div class="controls">
                                <input type="text" readonly="readonly" name="CasePatientTreatment.Address" data-bind="value:Address" />
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label">
                                Patient City / Town:
                            </label>
                            <div class="controls">
                                <input type="text" readonly="readonly" name="CasePatientTreatment.City" data-bind="value:City" />
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label">
                                Patient Region:
                            </label>
                            <div class="controls">
                                <input type="text" readonly="readonly" name="CasePatientTreatment.Region" data-bind="value:Region" />
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label">
                                Patient Post Code:
                            </label>
                            <div class="controls">
                                <input type="text" readonly="readonly" name="CasePatientTreatment.PostCode" data-bind="value:PostCode" style="text-transform:uppercase" />
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label">
                                Case Number:
                            </label>
                            <div class="controls">
                                <input type="text" readonly="readonly" name="CasePatientTreatment.CaseNumber" data-bind="value:CaseNumber" />
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label">
                                Referrer Reference Number:
                            </label>
                            <div class="controls">
                                <input type="text" readonly="readonly" name="CasePatientTreatment.CaseReferrerReferenceNumber"
                                    data-bind="value:CaseReferrerReferenceNumber" />
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label">
                                Patient Treatment Category:
                            </label>
                            <div class="controls">
                                <input type="text" readonly="readonly" name="CasePatientTreatment.TreatmentCategoryName"
                                    data-bind="value:TreatmentCategoryName" />
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label">
                                Patient Treatment Type:
                            </label>
                            <div class="controls">
                                <input type="text" readonly="readonly" name="CasePatientTreatment.TreatmentTypeName"
                                    data-bind="value:TreatmentTypeName" />
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label">
                                Patient Mobile:
                            </label>
                            <div class="controls">
                                <input type="text" readonly="readonly" name="CasePatientTreatment.MobilePhone" data-bind="value:MobilePhone" />
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label">
                                Home Phone:
                            </label>
                            <div class="controls">
                                <input type="text" readonly="readonly" name="CasePatientTreatment.HomePhone" data-bind="value:HomePhone" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="widget-box">
                <div class="widget-title">
                    <span class="icon"><i class="icon-align-justify"></i></span>
                    <h5>
                        Triage Assessment</h5>
                    <a href="#" data-bind="attr:{href:'/File/ViewSupplierTriageAssessment?caseID='+CaseID()}"
                        class="label label-info" role="button" data-toggle="modal">View Assessment</a>
                </div>
                <div class="widget-content">
                    <div class="form-group">
                        Update Triage Assessment:
                        <input type="file" name="TriageAssessmentUploadFile" id="TriageAssessmentUploadFile" />
                        Treatment Required :
                        <input type="radio" class="radio inline" required name="IsTreatmentRequired" value="true"
                            id="IsTreatmentRequired" />Yes
                        <input type="radio" class="radio inline" required name="IsTreatmentRequired" value="false"
                            id="IsTreatmentNotRequired" />
                        No
                    </div>
                </div>
            </div>
            <input type="hidden" name="CasePatientTreatment.CaseID" data-bind="value:CaseID" />
            <input type="hidden" name="CasePatientTreatment.SupplierID" data-bind="value:SupplierID" />
            <input type="hidden" name="CasePatientTreatment.CaseNumber" data-bind="value:CaseNumber" />
            <div class="form-actions">
                <div class="column-groups-button">
                    <button id="btnSave" type="submit" class="btn btn-primary btn-block" data-loading-text="Saving........">
                        Save</button>
                </div>
                <div class="clear">
                </div>
            </div>
        }
    </div>
</div>
@section AdditionalScripts{
    <script src="@Url.Content("~/Scripts/knockout/viewmodel/views/TriageAssessment/TriageAssessmentQAViewModel.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/ko.pager.js")" type="text/javascript"></script>
    <script type="text/javascript">
        var model = @MvcHtmlString.Create(new JavaScriptSerializer().Serialize(Model));
        var triageAssessmentQAViewModel = new TriageAssessmentQAViewModel();
              triageAssessmentQAViewModel.Init(model);
          ko.applyBindings(triageAssessmentQAViewModel, $("#divtriageAssessmentQA").get(0));         
                          
    </script>
}
