@using System.Web.Script.Serialization
@model ITSPublicApp.Domain.ViewModels.InitialAssessmentViewModel
@{
    ViewBag.Title = "Supplier Portal - Initial Assessment-Demo";
    Layout = "~/Areas/Supplier/Views/Shared/_LayoutForm.cshtml";
}
<link rel="stylesheet" href="@Url.Content("~/Content/themes/base/jquery.ui.base.css")" />
<link rel="stylesheet" href="@Url.Content("~/Content/themes/base/jquery.ui.theme.css")" />
<script src="@Url.Content("~/Scripts/jquery-ui.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/moment.min.js")" type="text/javascript" ></script>
<script src="@Url.Content("~/Scripts/knockout.validation.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/viewmodels/areas/shared/supplier/InitialAssessmentViewModel.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/plugins/knockout.dateformat.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.form.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/spin.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.spin.js")" type="text/javascript"></script>
<script type="text/javascript">

    $(function () {
        $("#AnticipatedDateOfDischarge").datepicker({
            dateFormat: 'dd/mm/yy',
            changeMonth: true,
            changeYear: true,
            yearRange: '1900:2035'
        });

        $("#txtPatientDateOfReturn").datepicker({
            dateFormat: 'dd/mm/yy',
            chageMonth: true,
            changeYear: true,
            yearRange: '1900:2035'
        });

        $("#txtPatientPreInjuryDutiesDate").datepicker({
            dateFormat: 'dd/mm/yy',
            chageMonth: true,
            changeYear: true,
            yearRange: '1900:2035'
        });

        var viewModel = new InitialAssessmentViewModel();
        viewModel.Init(@MvcHtmlString.Create(new JavaScriptSerializer().Serialize(Model)));
        ko.applyBindings(viewModel, $('#divInitialAssessment').get(0));
    });

    function symptomsectiondescription(NotApplicablesymptomsection) {

        var RelevantTestUndertaken = document.getElementById("RelevantTestUndertaken");
        RelevantTestUndertaken.disabled = NotApplicablesymptomsection.checked ? true : false;
        if (!RelevantTestUndertaken) {
            $("#RelevantTestUndertaken").prop('disabled', true);
        }
        document.getElementById("RelevantTestUndertaken").value = " ";
        document.getElementById("hdRelevantTestUndertaken").value = " ";
    }
    function enableDescriptionArea(NotApplicable) {

        var PreExistingConditionDescription = document.getElementById("PreExistingConditionDescription");
        PreExistingConditionDescription.disabled = NotApplicable.checked ? true : false;
        if (!PreExistingConditionDescription) {
            $("#PreExistingConditionDescription").prop('disabled', true);
        }
        document.getElementById("PreExistingConditionDescription").value = " ";
    }

</script>
<style type="text/css">
    .required {
        color: Red;
    }

    input:disabled {
        opacity: 0.60;
    }
</style>
<div id="divGridDisplaySpinner" style="position: fixed; top: 50%; left: 50%; bottom: 0%;">
    <div id="divGridDisplay">
    </div>
</div>
<div class="its-content" id="divInitialAssessment">
    @using (Html.BeginForm("Save", "InitialAssessment",
          FormMethod.Post, new
            {
                id = "frmInitialAssessment",
                enctype = "multipart/form-data",
                data_bind = "ajaxForm:{ success: function(responseText, statusText, xhr, $form){ InitialAssessmentSuccess(responseText, statusText, xhr, $form);}}"
            }))
    {

        @Html.AntiForgeryToken()
        <!--ko with:Patient-->
        <p>
            <strong>Patient Details</strong>
        </p>
        <div class="row3-label-initial">
            <ul>
                <li>Patient Name:</li>
                <li>Date of birth:</li>
                <li>Date of referral:</li>
            </ul>
        </div>
        <div class="row3-input-initial">
            <ul>
                <li><span data-bind="text:FirstName()+''+LastName()"></span></li>
                <li><span data-bind="text:BirthDate"></span>&nbsp;</li>
                <li><span data-bind="text:$root.Case.CaseSubmittedDate"></span></li>
            </ul>
        </div>
        <div class="row3-label-initial">
            <ul>
                <li>Date of accident:</li>
                <li>Date of initial assessment:</li>
                <li data-bind="visible:$root.Practitioners().length>0?true:false">Practitioners:</li>
            </ul>
        </div>
        <div class="row3-input-initial">
            <ul>
                <li></li>
                <li><span data-bind="text:InjuryDate"></span></li>
                <li><span data-bind="text:$root.strDateOfInitialAssessment"></span></li>
                <li data-bind="visible:$root.Practitioners().length>0?true:false">
                    <select name="CaseAssessment.CaseAssessmentDetail.PractitionerID" data-bind="options:$root.Practitioners,optionsText:'PractitionerFullName',optionsValue:'PractitionerID',value:$root.PractitionerID">
                    </select>
                </li>
            </ul>
        </div>
        <div class="clear">
        </div>
        <!--/ko-->
        <div class="its-authorisation-border">
        </div>
        <p>
            <strong>Patient Consent</strong>
        </p>
        <div class="form-col-1">
            <p>
                <span class="required">*</span> Has the patient given consent for this assessment
                report to be passed<br />
                to their solicitor, the treating pyhsiotherapist and the funding party?
            </p>
        </div>
        <div class="pull-right">
            <p>
                <input type="radio" class="its-radiobutton" data-bind="attr:{name:'CaseAssessment.HasPatientConsentForm'},checked:HasPatientConsentForm"
                    value="true" />
                Yes
                <input class="its-radiobutton-21" type="radio" data-bind="attr:{name:'CaseAssessment.HasPatientConsentForm'},checked:HasPatientConsentForm"
                    value="false" />
                No
            </p>
        </div>
        <div class="clear">
        </div>
        <div class="its-authorisation-border">
        </div>
        <p>
            <strong>Injury and Symptom Details</strong>
        </p>
        <p>
            <span class="required">*</span>Please give a brief description of the incident and
            diagnosis/injury. Please include whether the patient attended A&E and/or their GP:
        </p>
        <div class="row2-textarea">
            <textarea rows="50" cols="20" name="CaseAssessment.IncidentAndDiagnosisDescription"
                data-bind="value:IncidentAndDiagnosisDescription"></textarea>
            <input type="hidden" id="hdIncidentAndDiagnosisDescription" name="CaseAssessment.hdIncidentAndDiagnosisDescription" data-bind="value:IncidentAndDiagnosisDescription" />
        </div>
        <div class="box-2-cols">
            <div class="box-2-cols-header">
                Please give a brief description of the incident and diagnosis/injury. Please include
                whether the patient attended A&E and/or their GP.
            </div>

            <div class="box-2-col-2">
                <p>
                    <span class="its-required">*</span>Symptom Description
                </p>
            </div>
            <div class="box-2-col-2">
                <p>
                    <span class="its-required">*</span> Pain Score
                </p>
            </div>
            <div class="box-2-col-2">
                <p>
                    <span class="its-required">*</span> Side Affected
                </p>
            </div>
            <div class="box-2-col-2">
                <p>
                    <span class="its-required">*</span> Restriction of Range
                </p>
            </div>


            <div class="box-2-col-2">
                <p>
                    <span class="its-required">*</span> Strength Testing
                    &nbsp;
                </p>
            </div>

            <!--ko foreach: CaseAssessmentPatientInjuries-->
            <div class="box-2-col-2">
                <ul>
                    <li>
                        <select class="select-full-wd" data-bind="options:$root.SymptomDescriptions,optionsText: 'SymptomDescriptionName',optionsValue:'SymptomDescriptionID',
                         value:SymptomDescriptionID,attr: { name: 'CaseAssessment.CaseAssessmentPatientInjuries['+ $index() + '].SymptomDescriptionID' ,id: 'dropdown_' + $index() },value:SymptomDescriptionID, click :$root.EnableTextBox">
                        </select>
                        <input type="text" data-bind="attr: { name: 'CaseAssessment.CaseAssessmentPatientInjuries['+ $index() + '].OtherSymptomDesciption' ,id: 'prefix_' + $index() },value: OtherSymptomDesciption" disabled style="width: 160px;" />
                        <input type="hidden" data-bind="attr: { name: 'CaseAssessment.CaseAssessmentPatientInjuries['+ $index() + '].OtherSymptomDesciption', id: 'hd_ID' + $index() }, value: OtherSymptomDesciption" style="width: 160px;" />
                    </li>

                </ul>
            </div>

            <div class="box-2-col-2">
                <ul>
                    <li>
                        @*<input id="txtPainScore" onblur="checkPainScore()"maxlength="4"
                        data-bind="attr: { name: 'CaseAssessment.CaseAssessmentPatientInjuries['+ $index() + '].Score' },value: Score" />*@
                        <select id="DrpPainScore" class="select-full-wd" data-bind="attr: { name: 'CaseAssessment.CaseAssessmentPatientInjuries['+ $index() + '].Score' },value: Score">
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                            <option value="9">9</option>
                            <option value="10">10</option>
                        </select>

                    </li>
                </ul>
            </div>

            <div class="box-2-col-2">
                <ul>
                    <li>

                        <select class="select-full-wd" data-bind="options:$root.AffectedAreas,optionsText: 'AffectedAreaDescription',optionsValue:'AffectedAreaID',
                         value:AffectedAreaID,attr: { name: 'CaseAssessment.CaseAssessmentPatientInjuries['+ $index() + '].AffectedAreaID' },value:AffectedAreaID">
                        </select>
                    </li>
                </ul>
            </div>

            <div class="box-2-col-2">
                <ul>
                    <li>

                        <select class="select-full-wd" data-bind="options:$root.RestrictionRanges,optionsText: 'RestrictionRangeDescription',optionsValue:'RestrictionRangeID',
                         value:RestrictionRangeID,attr: { name: 'CaseAssessment.CaseAssessmentPatientInjuries['+ $index() + '].RestrictionRangeID' },value:RestrictionRangeID">
                        </select>
                    </li>
                </ul>
            </div>

            <div class="box-2-col-2">
                <ul>
                    <li>
                        <select class="select-full-wd" data-bind="options:$root.StrengthTestings,optionsText: 'StrengthTestingDescription',optionsValue:'StrengthTestingID',
                         value:StrengthTestingID,attr: { name: 'CaseAssessment.CaseAssessmentPatientInjuries['+ $index() + '].StrengthTestingID' },value:StrengthTestingID ">
                        </select>
                    </li>
                </ul>
            </div>


            <div class="row box-2-col-6 mrg-t10">
                <ul>
                    <li>
                        <div class="flot-lft-top">
                            <a href="#" data-bind="click:$parent.RemovePatientInjury">Remove</a>
                        </div>
                    </li>
                </ul>
            </div>


            <div class="clear">
            </div>
            <input type="hidden" data-bind="attr: { name: 'CaseAssessment.CaseAssessmentPatientInjuries['+ $index() + '].CaseAssessmentDetailID' }, value: CaseAssessmentDetailID" />
            <input type="hidden" data-bind="attr: { name: 'CaseAssessment.CaseAssessmentPatientInjuries['+ $index() + '].CaseAssessmentPatientInjuryID' }, value: CaseAssessmentPatientInjuryID" />
            <!--/ko-->
            <div class="add-span">
                <p>
                    <a href="#" data-bind="click: $root.AddMoreInjuryAndSymptoms">(+) Add More</a>
                </p>
            </div>
        </div>
        <p>
            Please detail any neural symptoms present with reference to the symptoms above:
        </p>
        <div class="row2-textarea">
            <textarea rows="50" cols="20" name="CaseAssessment.NeuralSymptomDescription" data-bind="value: NeuralSymptomDescription"></textarea>
        </div>
        
        <p>
            Please comment on relevant tests undertaken:
        </p>
        <input type="checkbox" name="NotApplicablesymptomsection" onclick="symptomsectiondescription(this);">Not Applicable</input>
        <div class="row2-textarea">
            <textarea rows="50" cols="20" id="RelevantTestUndertaken" name="CaseAssessment.RelevantTestUndertaken"
                data-bind="value:RelevantTestUndertaken"></textarea>
        </div> 
        <input type="hidden" id="hdRelevantTestUndertaken" name="CaseAssessment.hdRelevantTestUndertaken" data-bind="value:RelevantTestUndertaken" /> 
        <div class="clear">
        </div>
        <div class="its-authorisation-border">
        </div>
        <p>
            <strong>Factors affecting treatment</strong>
        </p>
        <p>
            <span class="required">*</span> Please give a brief description of any pre-existing
            conditions which may affect the patient’s recovery and return to work
        </p>   <input type="checkbox" name="NotApplicable" onclick="enableDescriptionArea(this);">Not Applicable</input>
        <div class="row2-textarea">
            <textarea id="PreExistingConditionDescription" rows="50" cols="20" name="CaseAssessment.PreExistingConditionDescription"
                data-bind="value: PreExistingConditionDescription"></textarea>
        </div>
        <div class="clear">
        </div>
        <div class="row3-radio">
            <p>
                <span class="required">*</span> Does the patient demonstrate any yellow flags?
                <span class="pull-right">
                    <input type="radio" class="its-radiobutton" name="CaseAssessment.HasYellowFlags"
                        value="true" data-bind="checked:HasYellowFlags" />Yes
                <input type="radio" class="its-radiobutton-73" name="CaseAssessment.HasYellowFlags"
                    value="false" data-bind="checked:HasYellowFlags" />No

                </span>
            </p>
            <p>
                <span class="required">*</span> Does the patient demonstrate any Red flags?
                <span class="pull-right">
                    <input type="radio" class="its-radiobutton" name="CaseAssessment.HasRedFlags" value="true"
                        data-bind="checked:HasRedFlags" />Yes
                <input type="radio" class="its-radiobutton-73" name="CaseAssessment.HasRedFlags" value="false"
                    data-bind="checked:HasRedFlags" />No
                </span>
            </p>
            <p>
                <span class="required">*</span> Is the patient already undergoing any treatment?
                 <span class="pull-right">
                     <input type="radio" class="its-radiobutton" value="true" name="CaseAssessment.IsPatientUndergoingTreatment"
                         data-bind="checked:IsPatientUndergoingTreatment" />Yes
                <input type="radio" class="its-radiobutton-73" value="false" name="CaseAssessment.IsPatientUndergoingTreatment"
                    data-bind="checked:IsPatientUndergoingTreatment" />No
                 </span>
            </p>
            <p>
                <span class="required">*</span> Is the patient currently taking any medication?
                 <span class="pull-right">
                     <input type="radio" class="its-radiobutton" value="true" name="CaseAssessment.IsPatientTakingMedication"
                         data-bind="checked:IsPatientTakingMedication" />Yes
                <input type="radio" class="its-radiobutton-73" value="false" name="CaseAssessment.IsPatientTakingMedication"
                    data-bind="checked:IsPatientTakingMedication" />No
                 </span>
            </p>
            <p>
                <span class="required">*</span> Does the patient require any further investigation?
               <span class="pull-right">
                   <input type="radio" class="its-radiobutton" value="true" name="CaseAssessment.PatientRequiresFurtherInvestigation"
                       data-bind="checked:PatientRequiresFurtherInvestigation" />Yes
                <input type="radio" class="its-radiobutton-73" value="false" name="CaseAssessment.PatientRequiresFurtherInvestigation"
                    data-bind="checked:PatientRequiresFurtherInvestigation" />No
               </span>
            </p>
        </div>
        <div class="clear">
        </div>
        <div>
            <p>
                If yes, please detail:
            </p>
            <div class="row2-textarea">
                <textarea rows="50" cols="20" name="CaseAssessment.FactorsAffectingTreatmentDescription"
                    data-bind="value:FactorsAffectingTreatmentDescription"></textarea>
            </div>
        </div>
        <div class="its-authorisation-border">
        </div>
        <p>
            <div id="divRemainingImpactonLifestyle">
                <strong>Remaining Impact on Lifestyle</strong>
            </div>
        </p>
        <!--ko foreach:CaseAssessmentPatientImpacts-->
        <div class="box-radio-placeholder">
            <div class="col-1-radioset">
                <p>
                    <span class="its-required">*</span> <strong data-bind="text:PatientImpactName"></strong>
                </p>
            </div>
            <div class="col-2-radioset">
                <div class="radioset2">
                    <ul>
                        <li>
                            <select class="form-control" data-bind="options: $root.PatientImpactValues, optionsText: 'PatientImpactValueName', optionsValue: 'PatientImpactValueID',value : PatientImpactValueID ,value : PatientImpactValueID,attr: { name: 'CaseAssessment.CaseAssessmentPatientImpacts['+  $index()  + '].PatientImpactValueID' , value:PatientImpactValueID}"></select>

                            @*<input type="text" id=""  data-bind="attr: { name: 'caseassessment.caseassessmentpatientimpacts['+ $parentcontext.$index()  + '].patientimpactvalueid' , value:patientimpactvalueid},checked:$parent.patientimpactvalueid" />*@
                        </li>
                    </ul>
                </div>
                <input type="hidden" data-bind="attr: { name: 'CaseAssessment.CaseAssessmentPatientImpacts['+ $index() + '].CaseAssessmentPatientImpactID' }, value: CaseAssessmentPatientImpactID" />
                <input type="hidden" data-bind="attr: { name: 'CaseAssessment.CaseAssessmentPatientImpacts['+ $index() + '].PatientImpactID' }, value: PatientImpactID" />
                <input type="hidden" data-bind="attr: { name: 'CaseAssessment.CaseAssessmentPatientImpacts['+ $index() + '].CaseAssessmentDetailID' }, value: CaseAssessmentDetailID" />
            </div>
        </div>
        <div class="clear">
        </div>
        <p>
            <strong>Comments:</strong>
        </p>
        <div class="row2-textarea">
            <textarea rows="30" cols="20" style="height: 100px;" data-bind="attr: { name: 'CaseAssessment.CaseAssessmentPatientImpacts['+ $index() + '].Comment' }, value: Comment "></textarea>
        </div>
        <div class="spacer-forms">
        </div>
        <!--/ko-->

        <div class="its-authorisation-border">
        </div>
        <p>
            <strong>Impact on Work</strong>
        </p>
        <div class="row3-label-initial2">
            <ul>
                <li><span class="required">*</span>Patient’s occupation:</li>
            </ul>
        </div>
        <div class="row3-input-initial3">
            <ul>
                <li>
                    <input name="CaseAssessment.PatientOccupation" data-bind="value:PatientOccupation" /></li>
            </ul>
        </div>
        <div class="row3-label-initial2">
            <ul>
                <li><span class="required">*</span>Work Capacity</li>
            </ul>
        </div>
        <div class="row3-input-initial3">
            <ul>
                <li>
                    <select name="CaseAssessment.PatientRoleID" class="select-full-wd" data-bind="options:PatientRole,optionsText: 'PatientRoleName',optionsValue:'PatientRoleID', value:PatientRoleID ">
                    </select>
                </li>
            </ul>
        </div>
        <div class="row3-radio">
            <p>
                <span class="required">*</span> Was the patient working at the time of the accident?
                <span class="pull-right">
                    <input type="radio" class="its-radiobutton" name="CaseAssessment.WasPatientWorkingAtTheTimeOfTheAccident"
                        value="true" data-bind="checked:WasPatientWorkingAtTheTimeOfTheAccident" />Yes
                <input type="radio" class="its-radiobutton-43" name="CaseAssessment.WasPatientWorkingAtTheTimeOfTheAccident"
                    value="false" data-bind="checked:WasPatientWorkingAtTheTimeOfTheAccident" />No
                <input type="radio" id="WorkingNotApplicable" class="its-radiobutton-43" name="CaseAssessment.WasPatientWorkingAtTheTimeOfTheAccident"
                    value="nullable"  />Not
                Applicable</span>
            </p>
        </div>
        <div class="row3-radio">
            <p>
                <span class="required">*</span> Has the patient had any time off work?
                <span class="pull-right">
                    <input type="radio" class="its-radiobutton" name="CaseAssessment.CaseAssessmentDetail.HasThePatientHadTimeOff"
                        value="true" data-bind="checked:HasThePatientHadTimeOff" />Yes
                <input type="radio" class="its-radiobutton-43" name="CaseAssessment.CaseAssessmentDetail.HasThePatientHadTimeOff"
                    value="false" data-bind="checked:HasThePatientHadTimeOff" />No
                <input type="radio" id="TimeNotApplicable" class="its-radiobutton-43" name="CaseAssessment.CaseAssessmentDetail.HasThePatientHadTimeOff"
                    value="nullable"  />Not Applicable</span>
            </p>
        </div>
        <div class="row3-radio">
            <p>
                <span class="required">*</span> Has the patient returned to work?
                <span id="spanHasThePatientReturnedToWork" class="pull-right">
                    <input type="radio" class="its-radiobutton" name="CaseAssessment.CaseAssessmentDetail.HasThePatientReturnedToWork"
                        value="true" onclick="javascript: CheckHasThePatientReturnedToWork(this.value)" data-bind="checked:HasThePatientReturnedToWork" />Yes
                <input type="radio" class="its-radiobutton-43" name="CaseAssessment.CaseAssessmentDetail.HasThePatientReturnedToWork"
                    value="false" onclick="javascript: CheckHasThePatientReturnedToWork(this.value)" data-bind="checked:HasThePatientReturnedToWork" />No
                <input type="radio" id="ReturnNotApplicable" class="its-radiobutton-43" name="CaseAssessment.CaseAssessmentDetail.HasThePatientReturnedToWork"
                    value="nullable" onclick="javascript: CheckHasThePatientReturnedToWork(this.value)" />Not Applicable</span>
            </p>
        </div>
        <div id="divPatientReturnDetails" class="hide">
            <div class="row3-label-initial2">
                <ul>
                    <li><span id="spanDateOfReturn" class="required">*</span>Date of Return to Work</li>
                </ul>
            </div>
            <div class="row3-input-initial2">
                <ul>
                    <li>
                        <input type="text" id="txtPatientDateOfReturn" name="CaseAssessment.CaseAssessmentDetail.PatientDateOfReturn" data-bind="value:PatientDateOfReturn" />
                    </li>
                </ul>
            </div>
            <div class="row3-label-initial2">
                <ul>
                    <li><span id="spanRecommendationReturn" class="required">*</span>Recommendations to Aide Return to Work</li>
                </ul>
            </div>
            <div class="row3-input-initial2">
                <ul>
                    <li>
                        <textarea id="txtPatientRecommendationReturn" name="CaseAssessment.CaseAssessmentDetail.PatientRecommendationReturn" class="area-text" data-bind="value:PatientRecommendationReturn"></textarea>
                    </li>
                </ul>
            </div>
        </div>        
        <div class="row3-label-initial2">
            <ul>
                <li><span class="required">*</span>If they have been absent, how many days/weeks have they been absent?</li>
            </ul>
        </div>
        <div class="row3-input-initial2">
            <ul>
                <li>
                    <input class="width-set-50" data-bind="value:AbsentPeriod" name="CaseAssessment.CaseAssessmentDetail.AbsentPeriod" />
                    <select name="CaseAssessment.CaseAssessmentDetail.AbsentPeriodDurationID" class="select-half-wd" data-bind="options:Duration,optionsText: 'DurationName', optionsValue:'DurationID',value:AbsentPeriodDurationID">
                    </select>
                </li>
            </ul>
        </div>
        <div class="row3-radio">
            <p>
                <span class="required">*</span> Is the patient still suffering a financial loss
                as a result of being off work? @*<span data-bind="text:IsPatientSufferingFinancialLoss">
                </span>*@
                <span class="pull-right">
                    <input type="radio" class="its-radiobutton" name="CaseAssessment.IsPatientSufferingFinancialLoss"
                        value="true" data-bind="checked:IsPatientSufferingFinancialLoss" />Yes
                <input type="radio" class="its-radiobutton-73" name="CaseAssessment.IsPatientSufferingFinancialLoss"
                    value="false" data-bind="checked:IsPatientSufferingFinancialLoss" />No
                </span>
            </p>
        </div>@*
        <div class="col-1-radioset">
            <p>
                <span class="required">*</span> Current work status</p>
        </div>
        <div class="col-2-radioset">
            <div class="radioset1">
                <ul data-bind="foreach:PatientWorkstatuses">
                    <li class="margin-fix" data-bind="text:PatientWorkstatusName"></li>
                </ul>
            </div>
            <div class="radioset-radi2">
                <ul data-bind="foreach:PatientWorkstatuses">
                    <li>
                        <input type="radio" class="its-radiobutton" name="CaseAssessment.CaseAssessmentDetail.PatientWorkstatusID"
                            data-bind="attr: {value: PatientWorkstatusID},checked:$parent.PatientWorkstatusID" /></li>
                </ul>
            </div>
        </div>*@
        
        <div class="row3-label-initial2">
            <ul>
                <li><span class="required">*</span>Current work status </li>
            </ul>
        </div>
        <div class="row3-input-initial3">
            <ul>
                <li>
                    <select id="ddlCurrentWorkStatus" class="select-full-wd" name="CaseAssessment.CaseAssessmentDetail.PatientWorkstatusID" data-bind="options:PatientWorkstatuses,optionsText: 'PatientWorkstatusName',optionsValue:'PatientWorkstatusID', 
                        value:PatientWorkstatusID, event:{ change: function(){changeCurrentWorkStatus() }}">
                    </select>
                </li>
            </ul>
        </div>
        <div class="row3-radio">
            <p>
                <span class="required">*</span>Is the patient likely to return to their pre-injury hours and duties?
              <span class="pull-right">
                  <input type="radio" class="its-radiobutton" id="YesPatientReturnToPreInjuryDuties" value="true" onclick="javascript: CheckIsPatientReturnToPreInjuryDuties(this.value)" name="CaseAssessment.CaseAssessmentDetail.IsPatientReturnToPreInjuryDuties"
                      data-bind="checked:IsPatientReturnToPreInjuryDuties" /><label for="YesPatientReturnToPreInjuryDuties">Yes</label>
                  <input type="radio" class="its-radiobutton-73" id="NoPatientReturnToPreInjuryDuties" value="false" onclick="javascript: CheckIsPatientReturnToPreInjuryDuties(this.value)" name="CaseAssessment.CaseAssessmentDetail.IsPatientReturnToPreInjuryDuties"
                      data-bind="checked:IsPatientReturnToPreInjuryDuties" /><label for="NoPatientReturnToPreInjuryDuties">No</label>
              </span>
            </p>
        </div>
        
        <div id="divPatientReturnToPreInjuryDutiesDetails">
            <div class="row3-label-initial2">
                <ul>
                    <li class="hide-height"><span class="required">*</span>Return to their pre-injury Date</li>
                </ul>
            </div>
            <div class="row3-input-initial3">
                <ul>
                    <li>
                        <input id="txtPatientPreInjuryDutiesDate" name="CaseAssessment.CaseAssessmentDetail.PatientPreInjuryDutiesDate" onblur="validate(this,'lblErrorPatientPreInjuryDutiesDate')"
                            data-bind="value:PatientPreInjuryDutiesDate" class="PatientPreInjuryDutiesDate" />
                        <span id="lblErrorPatientPreInjuryDutiesDate" class="warningcustom"></span>
                    </li>
                </ul>
            </div>
        </div> 
        <div id="divMainFactor" class="hide">
            <div class="row3-label-initial2">
                <ul>
                    <li><span class="required">*</span>Main Factors</li>
                </ul>
            </div>
            <div class="row3-input-initial3">
                <ul>
                    <li>
                        <textarea id="txtMainFactors" class="area-text" name="CaseAssessment.CaseAssessmentDetail.MainFactors" data-bind="value:MainFactors"></textarea>
                    </li>
                </ul>
            </div>
        </div>
        <div class="spacer-forms">
        </div>
        <div class="clear">
        </div>
        <div class="spacer-forms">
        </div>@*
        <div class="col-1-radioset">
            <p>
                <span class="required">*</span> Current impact on work</p>
        </div>
        <div class="col-2-radioset">
            <div class="radioset1">
                <ul data-bind="foreach:PatientImpactOnWorks">
                    <li class="margin-fix" data-bind="text:PatientImpactOnWorkName"></li>
                </ul>
            </div>
            <div class="radioset-radi2">
                <ul data-bind="foreach:PatientImpactOnWorks">
                    <li>
                        <input type="radio" class="its-radiobutton" name="CaseAssessment.CaseAssessmentDetail.PatientImpactOnWorkID"
                            data-bind="attr: {value: PatientImpactOnWorkID},checked:$root.PatientImpactOnWorkID" /></li>
                </ul>
            </div>
        </div>*@
        <div class="row3-label-initial2">
            <ul>
                <li><span class="required">*</span>Current impact on work </li>
            </ul>
        </div>
        <div class="row3-input-initial3">
            <ul>
                <li>
                    <select class="select-full-wd" name="CaseAssessment.CaseAssessmentDetail.PatientImpactOnWorkID" data-bind="options:PatientImpactOnWorks,optionsText: 'PatientImpactOnWorkName',optionsValue:'PatientImpactOnWorkID', value:PatientImpactOnWorkID ">
                    </select>
                </li>
            </ul>
        </div>
        <div class="clear">
        </div>
        <div class="its-authorisation-border">
        </div>
        <p>
            <strong>Treatment Recommendation</strong>
        </p>
        <div class="row3-label-initial2">
            <ul>
                <li><span class="required">*</span>How many sessions do you recommend?</li>
                <li>Please provide any additional details on the treatment programme</li>
                <li><span class="required">*</span>Over what period should these be carried out?
                    <div id="divSpaceHeight" class="hide-height"></div>
                </li>
                <li><span class="required">*</span>What is the anticipated date of discharge?</li>
            </ul>
        </div>
       
        <div class="row3-input-initial2">
            <ul>
                <li>
                    <select id="PatientRecommendedTreatmentSessionsID" class="select-full-wd" name="CaseAssessment.CaseAssessmentDetail.PatientRecommendedTreatmentSessions" data-bind="value : PatientRecommendedTreatmentSessions">
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                        <option value="11">11</option>
                        <option value="12">12</option>
                        <option value="13">13</option>
                        <option value="14">14</option>
                        <option value="15">15</option>
                        <option value="16">16</option>
                        <option value="17">17</option>
                        <option value="18">18</option>
                        <option value="19">19</option>
                        <option value="20">20</option>
                    </select>
                    @*<input name="CaseAssessment.CaseAssessmentDetail.PatientRecommendedTreatmentSessions"
                        data-bind="value:PatientRecommendedTreatmentSessions" />*@</li>
                <li>
                    <textarea name="CaseAssessment.CaseAssessmentDetail.PatientRecommendedTreatmentSessionsDetail"
                        data-bind="value:PatientRecommendedTreatmentSessionsDetail" class="area-text"></textarea>
                </li>
                <li>
                    <select id="ddlTreatmentPeriodType" class="select-full-wd" name="CaseAssessment.CaseAssessmentDetail.TreatmentPeriodTypeID"
                        data-bind="event:{ change: function(){changeTreatmentPeriod() }}, options:TreatmentPeriodTypes, optionsText: 'TreatmentPeriodTypeDesc', optionsValue:'TreatmentPeriodTypeID', value:PatientTreatmentPeriodTypeID">
                    </select>
                    <input type="hidden" name="CaseAssessment.CaseAssessmentDetail.TreatmentPeriodTypeID" data-bind="value: PatientTreatmentPeriodTypeID" />
                    <div id="divTreatmentPeriodOther" class="hide">
                        <input id="txtPatientTreatmentPeriod" class="width-set-50" data-bind="value:PatientTreatmentPeriod" name="CaseAssessment.CaseAssessmentDetail.PatientTreatmentPeriod" />
                        <select class="select-half-wd" name="CaseAssessment.CaseAssessmentDetail.PatientTreatmentPeriodDurationID"
                            data-bind="options:Duration,optionsText: 'DurationName', optionsValue:'DurationID',value:PatientTreatmentPeriodDurationID">
                        </select>
                    </div>
                </li>
                <li>
                    <input id="AnticipatedDateOfDischarge" name="CaseAssessment.AnticipatedDateOfDischarge" onblur="validate(this,'lblErrorAnticipatedDateOfDischarge')"
                        data-bind="value:AnticipatedDateOfDischarge" class="AnticipatedDateOfDischarge" />
                    <span id="lblErrorAnticipatedDateOfDischarge" class="warningcustom"></span>
                </li>
            </ul>
        </div>
       
        <div class="col-1-radioset">
            <p>
                <span class="required">*</span> What level of recovery do you anticipate the patient will make following treatment?
            </p>
        </div>
        <div class="col-2-radioset">
            <ul>
                <li>
                    <select class="form-control full-wd" name="CaseAssessment.CaseAssessmentDetail.PatientLevelOfRecoveryID" data-bind="options: $root.PatientLevelOfRecoveries, optionsText: 'PatientLevelOfRecoveryName', optionsValue: 'PatientLevelOfRecoveryID',value : PatientLevelOfRecoveryID,attr:{value: PatientLevelOfRecoveryID}"></select>
                </li>
            </ul>
        </div>
        <div class="clear">
        </div>
        <div class="col-1-radioset">
            <p>
                <span class="required">*</span> What Treatment Methods do you Propose?
            </p>
        </div>
        <div class="col-2-radioset">
            <div class="radioset_InitialAssessmentProposedMethods">
                <ul data-bind="foreach:ProposedTreatmentMethods">
                    <li class="margin-fix text-left" data-bind="text:ProposedTreatmentMethodName"></li>
                </ul>
            </div>
            <div class="radioset-radi2">
                <ul data-bind="foreach:ProposedTreatmentMethods">
                    <li class="text-right">
                        <input type="checkbox" name="CaseAssessment.ProposedTreatmentMethodIDs" data-bind="attr: { value: ProposedTreatmentMethodID }, checked: $parent.ProposedTreatmentMethodIDs" />
                        @*<input type="radio" name="CaseAssessment.ProposedTreatmentMethodID" class="its-radiobutton"
                            data-bind="attr: {value: ProposedTreatmentMethodID},checked:$parent.ProposedTreatmentMethodID" />*@
                    </li>
                </ul>
            </div>
        </div>
        <div class="clear">
        </div>
        <div class="row3-radio">
            <p>
                <span class="required">*</span> Has the patient been given a home exercise programme?
              <span class="pull-right">
                  <input type="radio" class="its-radiobutton" value="true" name="CaseAssessment.HasPatientHomeExerciseProgramme"
                      data-bind="checked:HasPatientHomeExerciseProgramme" />Yes
                <input type="radio" class="its-radiobutton-73" value="false" name="CaseAssessment.HasPatientHomeExerciseProgramme"
                    data-bind="checked:HasPatientHomeExerciseProgramme" />No
              </span>
            </p>
        </div>
        <div class="clear">
        </div>
        <p>Please provide evidence of clinical reasoning in support of treatment recommendations:</p>
        <div class="row2-textarea">
            <textarea rows="50" cols="20" name="CaseAssessment.CaseAssessmentDetail.EvidenceOfClinicalReasoning"
                data-bind="value:EvidenceOfClinicalReasoning"></textarea>
        </div>
        <div class="clear">
        </div>
        <div class="spacer-forms">
        </div>
        <p>
            <strong>Additional Information</strong>
        </p>
        <p>Please provide any relevant additional information</p>
        <div class="row2-textarea">
            <textarea rows="50" cols="20" name="CaseAssessment.CaseAssessmentDetail.AdditionalInformation"
                data-bind="value:AdditionalInformation"></textarea>
        </div>
        <div class="its-authorisation-border">
        </div>
        
        <div data-bind="visible:IsAccepted()==false">
            <p>
                <strong>Message to Supplier</strong>
            </p>
            <div class="row2-textarea">
                <div class="supplier-message">
                    <p data-bind="text:DeniedMessage">
                        &nbsp;
                    </p>
                </div>
            </div>
            <div class="clear">
            </div>
            <div class="its-authorisation-border">
            </div>
        </div>
        <div class="its-authorisation-row6">
            <p>
                <input type="submit" class="its-printbutton" data-bind="click:Print" />
                <input type="submit" data-bind="click:SaveInitialAssessmentform" id="btnSave" class="its-savebutton" />
                <input type="submit" class="its-submitbutton" id="btnSubmit" data-bind="click:SubmitData" disabled />
                <input type="button" class="its-closebutton" data-bind="click:Close" />
            </p>
        </div>
        //Hidden Block
        <input type="hidden" data-bind="value:CaseID" name="CaseAssessment.CaseID" />
        <input type="hidden" data-bind="value:CaseID" name="CaseAssessment.CaseAssessmentDetail.CaseID" />
        <input type="hidden" data-bind="value:CaseAssessment.AssessmentServiceID" name="CaseAssessment.CaseAssessmentDetail.AssessmentServiceID" />
        <input type="hidden" data-bind="value:CaseAssessment.AssessmentAuthorisationID" name="CaseAssessment.AssessmentAuthorisationID" /> 
        <input type="hidden" data-bind="value:CaseAssessment.AssessmentServiceID" name="CaseAssessment.AssessmentServiceID" /> 
        <input type="hidden" data-bind="value:CaseAssessment.HasPatientHomeExerciseProgramme"
            name="CaseAssessment.HasPatientHomeExerciseProgramme" />
        
        <input type="hidden" data-bind="value:CaseAssessmentDetailID" name="CaseAssessment.CaseAssessmentDetail.CaseAssessmentDetailID" />
        <input type="hidden" data-bind="value:'@DateTime.Now'" name="CaseAssessment.CaseAssessmentDetail.AssessmentDate" />
        <div class="clear">
        </div>
        
    }
</div>
